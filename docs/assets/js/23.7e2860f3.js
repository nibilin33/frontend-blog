(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{208:function(e,t,n){"use strict";n.r(t);var a=n(0),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"环境准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境准备","aria-hidden":"true"}},[e._v("#")]),e._v(" 环境准备")]),e._v(" "),n("ol",[n("li",[e._v("Anaconda:python 版本和第三方库管理")])]),e._v(" "),n("p",[e._v("2."),n("a",{attrs:{href:"https://docs.anaconda.com/anaconda/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装步骤"),n("OutboundLink")],1),e._v(" https://docs.anaconda.com/anaconda/install/"),n("br"),e._v("\n3."),n("a",{attrs:{href:"https://docs.conda.io/projects/conda/en/latest/user-guide/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用说明"),n("OutboundLink")],1),e._v(" https://docs.conda.io/projects/conda/en/latest/user-guide/index.html")]),e._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[e._v("常用命令")])]),e._v(" "),n("blockquote",[n("p",[e._v("conda env list 查看创建的环境\nconda activate envname 激活当前环境")])]),e._v(" "),n("h2",{attrs:{id:"国际化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#国际化","aria-hidden":"true"}},[e._v("#")]),e._v(" 国际化")]),e._v(" "),n("ol",[n("li",[e._v("实现思路"),n("br"),e._v("\n1.1）新项目开发利用python脚本替换中文为$t"),n("br"),e._v("\n1.2）重构或者迭代项目利用vscode国际化插件替换已有的国际化"),n("br"),e._v(" "),n("a",{attrs:{href:"https://code.visualstudio.com/api/get-started/your-first-extension",target:"_blank",rel:"noopener noreferrer"}},[e._v("vscode 插件开发"),n("OutboundLink")],1),n("br"),e._v(" "),n("a",{attrs:{href:"https://github.com/antfu/i18n-ally",target:"_blank",rel:"noopener noreferrer"}},[e._v("vscode 参考"),n("OutboundLink")],1),n("br"),e._v(" "),n("strong",[e._v("详细看show me the code 的注释说明")]),n("br"),e._v(" "),n("details",[n("summary",[e._v("Show Me The Code")])])]),e._v(" "),n("li",[e._v("使用说明")])]),e._v(" "),n("h2",{attrs:{id:"项目发布"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目发布","aria-hidden":"true"}},[e._v("#")]),e._v(" 项目发布")]),e._v(" "),n("ol",[n("li",[e._v("实现思路")])]),e._v(" "),n("blockquote",[n("ol",[n("li",[e._v("本地目录放到服务器目录")]),e._v(" "),n("li",[e._v("执行打包命令")]),e._v(" "),n("li",[e._v("下载包到本地，本地中转到目标打包目录")]),e._v(" "),n("li",[e._v("发送邮件")])])]),e._v(" "),n("details",[n("summary",[e._v("Show Me The Code")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# coding: utf-8\nimport requests\nimport paramiko\nimport os\nimport traceback\nimport shutil\n\nhost = \"\"\nport = 22\nuser = \"\"\npassword = \"\"\npackageConfig = {\n    'web_uc': {\n        'local': 'J:\\gitlab\\uc2.xApplications\\server\\dist', #本地工程路径\n        'remote': '/usr/local/apollo/web_uc/dist', # 目标服务器目录\n        'upload': True, # 是否需要发版\n        'nextVersionPath': '\\\\\\\\gitlab.yealink.com\\uc_module\\web_uc\\\\23.253.0.20', # 放包的的地址，直接写下个版本号，会自动创建\n    },\n    'web_ume': {\n        'local': '',\n        'remote': '/usr/local/apollo/web_ume/dist',\n        'upload': False,\n        'nextVersionPath': '\\\\\\\\gitlab.yealink.com\\uc_module\\web_ume\\\\23.253.0.21',\n    }\n}\n# 中文要注意编码，u\nmailConfig = {\n    'receivers':[],\n    'subject':u'',\n    'mailContentPath':'mail.html', # 邮件模板路径\n    # eg:{'mail_path':'J:/python-anaconda/translate.json','file_name':'translate.json'}\n    'attachments':[]\n}\n\n\ndef __get_all_files_in_local_dir(local_dir):\n    all_files = list()\n    files = os.listdir(local_dir)\n    for x in files:\n        filename = os.path.join(local_dir, x)\n        if os.path.isdir(filename):\n            all_files.extend(__get_all_files_in_local_dir(filename))\n        else:\n            all_files.append(filename)\n    return all_files\n\n\ndef sftp_put_dir(local_dir, remote_dir, sftp, ssh):\n    if remote_dir[-1] == '/':\n        remote_dir = remote_dir[0:-1]\n    print remote_dir\n    all_files = __get_all_files_in_local_dir(local_dir)\n    for x in all_files:\n        filename = os.path.split(x)[-1]\n        remote_file = os.path.split(x)[0].replace(local_dir, remote_dir)\n        path = remote_file.replace('\\\\', '/')\n        remote_filename = path + '/' + filename\n        tdin, stdout, stderr = ssh.exec_command('mkdir -p ' + path)\n        print stderr.read()\n        print (u'Put文件%s传输到%s中...' % (filename, host))\n        sftp.put(x, remote_filename)\n\n\ndef sendOutLook():\n    outlook = win32.Dispatch('Outlook.Application')\n    mail_item = outlook.CreateItem(0) # 0: olMailItem\n    for recipers in mailConfig['receivers']:\n        mail_item.Recipients.Add(recipers)\n    mail_item.BodyFormat = 2          # 2: Html format\n    myfile = codecs.open(mailConfig['mailContentPath'], 'r',encoding='utf8')\n    for attr in mailConfig['attachments']:\n        print attr\n        mail_item.Attachments.Add(attr['mail_path'], 1, 1, attr['file_name'])\n    data = myfile.read()\n    myfile.close()\n    mail_item.HTMLBody = data\n    mail_item.Subject = mailConfig['subject']\n    mail_item.Send()\n\ndef package(local, remote, filename, nextVersion):\n    ssh = paramiko.SSHClient()\n    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    ssh.connect(host, port, user, password)\n    sftp = ssh.open_sftp()\n    ssh.exec_command('rm -rf ' + remote)\n    sftp_put_dir(local, remote, sftp, ssh)\n    targetDir = remote[0:remote.rindex('/')]\n    targetFile = targetDir + '/' + filename + '.tar.gz'\n    ssh.exec_command('rm -rf ' + targetFile)\n    tdin, stdout, stderr = ssh.exec_command('cd ' + targetDir + ';' + 'tar -zcvf' + ' ' + filename + '.tar.gz' + ' *')\n    print stdout.read()\n    print \"Downloading files ==> \" + targetFile\n    localPath = './' + filename + '.tar.gz'\n    print localPath\n    if os.path.exists(localPath):\n        try:\n            os.remove(localPath)\n            print(\"File removed successfully\")\n        except OSError as error:\n            print(error)\n            print(\"File path can not be removed\")\n    sftp.get(targetFile, localPath)\n    if not os.path.exists(nextVersion):\n        os.mkdir(nextVersion)\n    print(\"Directory \", nextVersion, \" Created \")\n    shutil.copy(localPath, nextVersion)\n\nif __name__ == '__main__':\n    print desktop\n    try:\n        for itera in packageConfig:\n            if packageConfig[itera]['upload']:\n                package(packageConfig[itera]['local'], packageConfig[itera]['remote'],itera,packageConfig[itera]['nextVersionPath'])\n        sendOutLook()\n    except Exception, err:\n        print(traceback.format_exc())\n\n")])])])]),e._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[e._v("使用说明"),n("br"),e._v("\n安装依赖pip install paramiko,pip install pywin32"),n("br"),e._v("\n配置使用看show me the code 的注释说明")])]),e._v(" "),n("h2",{attrs:{id:"代码生成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码生成","aria-hidden":"true"}},[e._v("#")]),e._v(" 代码生成")]),e._v(" "),n("ol",[n("li",[e._v("实现思路")]),e._v(" "),n("li",[e._v("使用说明")])]),e._v(" "),n("h2",{attrs:{id:"代码分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码分析","aria-hidden":"true"}},[e._v("#")]),e._v(" 代码分析")]),e._v(" "),n("ol",[n("li",[e._v("实现思路")]),e._v(" "),n("li",[e._v("使用说明")])]),e._v(" "),n("h2",{attrs:{id:"自动化测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自动化测试","aria-hidden":"true"}},[e._v("#")]),e._v(" 自动化测试")]),e._v(" "),n("p",[e._v("方法一")]),e._v(" "),n("ol",[n("li",[e._v("Selenium IDE\nSelenium IDE是Firefox浏览器的一个插件，依附于Firefox浏览器。"),n("br"),e._v(" "),n("a",{attrs:{href:"https://addons.mozilla.org/en-US/firefox/addon/selenium-ide/",target:"_blank",rel:"noopener noreferrer"}},[e._v("FireFox 插件"),n("OutboundLink")],1),n("br"),e._v(" "),n("a",{attrs:{href:"https://github.com/nibilin33/frontend-blog/raw/master/press/guide/crx/chrome_selenium.crx",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome 插件"),n("OutboundLink")],1),e._v("\n(https://github.com/nibilin33/frontend-blog/raw/master/press/guide/crx/chrome_selenium.pem)")])]),e._v(" "),n("p",[e._v("方法二")]),e._v(" "),n("ol",[n("li",[e._v("WebdriverIO"),n("br"),e._v(" "),n("a",{attrs:{href:"https://webdriver.io/docs/api.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档地址"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);