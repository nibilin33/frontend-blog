<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" href="./nibl_32.ico" type="image/x-icon">
    <script>
      var _hmt = _hmt || [];
      _hmt.push(['_setAutoPageview', false]);
      (function() {
        console.log("load hmt");
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ca71d93db8b670d9d48afc9fb07d5631";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
        </script>
    <meta name="description" content="记录——平凡之路">
    
    <link rel="preload" href="/frontend-blog/assets/css/0.styles.fbb650d3.css" as="style"><link rel="preload" href="/frontend-blog/assets/js/app.a1c6f5fb.js" as="script"><link rel="preload" href="/frontend-blog/assets/js/2.9d4f40a5.js" as="script"><link rel="preload" href="/frontend-blog/assets/js/15.3576902d.js" as="script"><link rel="prefetch" href="/frontend-blog/assets/js/10.72492c2a.js"><link rel="prefetch" href="/frontend-blog/assets/js/11.274a683c.js"><link rel="prefetch" href="/frontend-blog/assets/js/12.845e1d53.js"><link rel="prefetch" href="/frontend-blog/assets/js/13.364ea009.js"><link rel="prefetch" href="/frontend-blog/assets/js/14.8746fe82.js"><link rel="prefetch" href="/frontend-blog/assets/js/16.73980ce5.js"><link rel="prefetch" href="/frontend-blog/assets/js/17.37590683.js"><link rel="prefetch" href="/frontend-blog/assets/js/18.3d4d4625.js"><link rel="prefetch" href="/frontend-blog/assets/js/19.c99d15f0.js"><link rel="prefetch" href="/frontend-blog/assets/js/20.9b97d604.js"><link rel="prefetch" href="/frontend-blog/assets/js/21.0e1a001b.js"><link rel="prefetch" href="/frontend-blog/assets/js/22.fa159d56.js"><link rel="prefetch" href="/frontend-blog/assets/js/23.9a9381c6.js"><link rel="prefetch" href="/frontend-blog/assets/js/24.280d88a0.js"><link rel="prefetch" href="/frontend-blog/assets/js/25.3331d2e4.js"><link rel="prefetch" href="/frontend-blog/assets/js/26.7c85a583.js"><link rel="prefetch" href="/frontend-blog/assets/js/27.e6b44d83.js"><link rel="prefetch" href="/frontend-blog/assets/js/28.965766f7.js"><link rel="prefetch" href="/frontend-blog/assets/js/29.34d7bb40.js"><link rel="prefetch" href="/frontend-blog/assets/js/3.c15afdb9.js"><link rel="prefetch" href="/frontend-blog/assets/js/30.32a30b8f.js"><link rel="prefetch" href="/frontend-blog/assets/js/31.ae94e79a.js"><link rel="prefetch" href="/frontend-blog/assets/js/32.9d5942a0.js"><link rel="prefetch" href="/frontend-blog/assets/js/33.26ca59ae.js"><link rel="prefetch" href="/frontend-blog/assets/js/34.68128210.js"><link rel="prefetch" href="/frontend-blog/assets/js/35.0caf7dc5.js"><link rel="prefetch" href="/frontend-blog/assets/js/36.3612839f.js"><link rel="prefetch" href="/frontend-blog/assets/js/37.b2a25984.js"><link rel="prefetch" href="/frontend-blog/assets/js/38.14f8add0.js"><link rel="prefetch" href="/frontend-blog/assets/js/39.d3f09ec8.js"><link rel="prefetch" href="/frontend-blog/assets/js/4.6850d751.js"><link rel="prefetch" href="/frontend-blog/assets/js/40.81eb0d1c.js"><link rel="prefetch" href="/frontend-blog/assets/js/41.7c0d567e.js"><link rel="prefetch" href="/frontend-blog/assets/js/42.29b664c5.js"><link rel="prefetch" href="/frontend-blog/assets/js/43.5e6bb219.js"><link rel="prefetch" href="/frontend-blog/assets/js/44.7c709ca7.js"><link rel="prefetch" href="/frontend-blog/assets/js/45.31c36d54.js"><link rel="prefetch" href="/frontend-blog/assets/js/46.fe81afc9.js"><link rel="prefetch" href="/frontend-blog/assets/js/47.e381adc1.js"><link rel="prefetch" href="/frontend-blog/assets/js/48.40461ff5.js"><link rel="prefetch" href="/frontend-blog/assets/js/49.d2013cdc.js"><link rel="prefetch" href="/frontend-blog/assets/js/5.1f7e948c.js"><link rel="prefetch" href="/frontend-blog/assets/js/50.61b4398c.js"><link rel="prefetch" href="/frontend-blog/assets/js/51.949c806f.js"><link rel="prefetch" href="/frontend-blog/assets/js/52.ee05ffb0.js"><link rel="prefetch" href="/frontend-blog/assets/js/6.958c7c30.js"><link rel="prefetch" href="/frontend-blog/assets/js/7.fdacea23.js"><link rel="prefetch" href="/frontend-blog/assets/js/8.ac3b40e9.js"><link rel="prefetch" href="/frontend-blog/assets/js/9.ff25cdcd.js">
    <link rel="stylesheet" href="/frontend-blog/assets/css/0.styles.fbb650d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-blog/" class="home-link router-link-active"><!----> <span class="site-name">Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/nibilin33" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/nibilin33" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontend-blog/guide/foreigner.html" class="sidebar-link">英语面试资料</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#外企名单" class="sidebar-link">外企名单</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#事前准备" class="sidebar-link">事前准备</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#外企面试常见问题" class="sidebar-link">外企面试常见问题</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#备考雅思-学习安排" class="sidebar-link">备考雅思&amp;学习安排</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#推荐看的英文版技术电子书" class="sidebar-link">推荐看的英文版技术电子书</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/foreigner.html#外企面试问题准备清单" class="sidebar-link">外企面试问题准备清单</a></li></ul></li><li><a href="/frontend-blog/guide/cross.html" class="sidebar-link">跨平台</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#跨平台框架" class="sidebar-link">跨平台框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#react-native" class="sidebar-link">React Native</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#flutter" class="sidebar-link">Flutter</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#weex" class="sidebar-link">Weex</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#ionic" class="sidebar-link">Ionic</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#onsen-ui" class="sidebar-link">Onsen UI</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#corona" class="sidebar-link">Corona</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cross.html#跨端组件开发" class="sidebar-link">跨端组件开发</a></li></ul></li><li><a href="/frontend-blog/guide/micro.html" class="sidebar-link">微前端那点事</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/micro.html#引入微前端背景" class="sidebar-link">引入微前端背景</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/micro.html#技术选项" class="sidebar-link">技术选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/micro.html#module-federation" class="sidebar-link">Module Federation</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/micro.html#qiankun" class="sidebar-link">qiankun</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/promto.html" class="sidebar-link">那些年让人难受的BUG</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#内嵌web加载慢" class="sidebar-link">内嵌web加载慢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#全流程瓶颈分析" class="sidebar-link">全流程瓶颈分析</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#android的webview概率触摸白屏" class="sidebar-link">Android的webview概率触摸白屏</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#nginx-502问题-node-的锅" class="sidebar-link">NGINX 502问题，node 的锅？！</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#大数据量情况的性能问题" class="sidebar-link">大数据量情况的性能问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#可以用上的工具" class="sidebar-link">可以用上的工具</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#ui性能关注点" class="sidebar-link">UI性能关注点</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#作死的兼容性问题" class="sidebar-link">作死的兼容性问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#date" class="sidebar-link">Date</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#display-table-cell" class="sidebar-link">display:table-cell</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#优化会议预约" class="sidebar-link">优化会议预约</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#优化组织架构" class="sidebar-link">优化组织架构</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#跨部门的相爱相杀" class="sidebar-link">跨部门的相爱相杀</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#qt内嵌webview奔溃" class="sidebar-link">QT内嵌webview奔溃</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#约定接口调用无效" class="sidebar-link">约定接口调用无效</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#离屏渲染优化" class="sidebar-link">离屏渲染优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#渲染机制" class="sidebar-link">渲染机制</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/promto.html#相关资料" class="sidebar-link">相关资料</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/vscode.html" class="sidebar-link">vscode插件开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/vscode.html#插件开发概述" class="sidebar-link">插件开发概述</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/vscode.html#第一个插件" class="sidebar-link">第一个插件</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/vscode.html#学习三方插件" class="sidebar-link">学习三方插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/vscode.html#vscode-dvc" class="sidebar-link">vscode-dvc</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/edge.html" class="sidebar-link">边缘计算</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/edge.html#基于边缘计算做个性化ssr渲染" class="sidebar-link">基于边缘计算做个性化SSR渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/edge.html#边缘侧功能" class="sidebar-link">边缘侧功能</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/edge.html#faas侧功能" class="sidebar-link">FaaS侧功能</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/mini-canvas.html" class="sidebar-link">小型Canvas框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#需要实现的功能点" class="sidebar-link">需要实现的功能点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#定义数据结构" class="sidebar-link">定义数据结构</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#判断是否在点击区域" class="sidebar-link">判断是否在点击区域</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#更新" class="sidebar-link">更新</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#局部清除" class="sidebar-link">局部清除</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/mini-canvas.html#g6编辑器的代码生成" class="sidebar-link">G6编辑器的代码生成</a></li></ul></li><li><a href="/frontend-blog/guide/canvas.html" class="sidebar-link">Canvas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/canvas.html#学习例子" class="sidebar-link">学习例子</a></li></ul></li><li><a href="/frontend-blog/guide/webgpu.html" class="sidebar-link">WebGPU</a></li><li><a href="/frontend-blog/guide/webgl.html" class="sidebar-link">WebGL</a></li><li><a href="/frontend-blog/guide/graphics.html" class="sidebar-link">图形学编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/graphics.html#准备开发环境-mac" class="sidebar-link">准备开发环境（Mac）</a></li></ul></li><li><a href="/frontend-blog/guide/npm.html" class="sidebar-link">每天一个实用npm库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/npm.html#webassemblyjs-ast" class="sidebar-link">@webassemblyjs/ast</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/npm.html#vue-compiler-sfc" class="sidebar-link">@vue/compiler-sfc</a></li></ul></li><li><a href="/frontend-blog/guide/wasm.html" class="sidebar-link">WebAssembly</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/wasm.html#wasm-简介" class="sidebar-link">wasm 简介</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/wasm.html#安装wabt" class="sidebar-link">安装wabt</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/wasm.html#wasm-官网" class="sidebar-link">wasm 官网</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/wasm.html#wasm-应用" class="sidebar-link">wasm 应用</a></li></ul></li><li><a href="/frontend-blog/guide/book.html" class="sidebar-link">读书笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#你不知道的javascript" class="sidebar-link">你不知道的Javascript</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#linux操作系统" class="sidebar-link">Linux操作系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#中断机制" class="sidebar-link">中断机制</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#锁" class="sidebar-link">锁</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#内存管理" class="sidebar-link">内存管理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#文件管理" class="sidebar-link">文件管理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#块io层" class="sidebar-link">块IO层</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#页高速缓存" class="sidebar-link">页高速缓存</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#基本组成" class="sidebar-link">基本组成</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#shell-脚本" class="sidebar-link">Shell 脚本</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#常用命令" class="sidebar-link">常用命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#webkit技术内幕" class="sidebar-link">Webkit技术内幕</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#html-hypertext-markup-language" class="sidebar-link">HTML(hypertext markup language)</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#webkit渲染过程" class="sidebar-link">Webkit渲染过程</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#webkit-资源加载机制" class="sidebar-link">webkit 资源加载机制</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#chromium-网络栈" class="sidebar-link">Chromium 网络栈</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#web-components" class="sidebar-link">Web Components</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#javascript-的执行" class="sidebar-link">Javascript 的执行</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#硬件加速的基础" class="sidebar-link">硬件加速的基础</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#javascript-引擎" class="sidebar-link">javascript 引擎</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#移动webkit" class="sidebar-link">移动Webkit</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#web安全深度剖析" class="sidebar-link">web安全深度剖析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#理论篇" class="sidebar-link">理论篇</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#实战篇" class="sidebar-link">实战篇</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#深入浅出node-js" class="sidebar-link">深入浅出node.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#单线程" class="sidebar-link">单线程</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#node-的模块实现" class="sidebar-link">Node 的模块实现</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#核心模块" class="sidebar-link">核心模块</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#非i-o-的异步api" class="sidebar-link">非I/O 的异步API</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#nodejs基础中间件connect" class="sidebar-link">Nodejs基础中间件Connect</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#异步api添加过载保护" class="sidebar-link">异步API添加过载保护</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#v8垃圾回收机制" class="sidebar-link">V8垃圾回收机制</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#内存泄漏排查工具" class="sidebar-link">内存泄漏排查工具</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#buffer" class="sidebar-link">Buffer</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#ansi转义码" class="sidebar-link">ANSI转义码</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/book.html#chrome-v8-基础" class="sidebar-link">Chrome V8 基础</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/code.html" aria-current="page" class="active sidebar-link">源码学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#webpack" class="sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#整体流程" class="sidebar-link">整体流程</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#参数管理" class="sidebar-link">参数管理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#构建依赖图" class="sidebar-link">构建依赖图</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#输出" class="sidebar-link">输出</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#构建优化" class="sidebar-link">构建优化</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#相关插件" class="sidebar-link">相关插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#vue" class="sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#keep-alive" class="sidebar-link">keep-alive</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#nexttick" class="sidebar-link">nextTick</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#v-on-v-bind-v-model" class="sidebar-link">v-on,v-bind,v-model</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#v-if、v-show、v-html-v-for" class="sidebar-link">v-if、v-show、v-html,v-for</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#key-的作用" class="sidebar-link">key 的作用</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#vuex" class="sidebar-link">vuex</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#vue-router" class="sidebar-link">vue-router</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#vue-server-renderer" class="sidebar-link">vue-server-renderer</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#babel" class="sidebar-link">babel</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#express" class="sidebar-link">express</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#lodash" class="sidebar-link">lodash</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#react" class="sidebar-link">react</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#常用库" class="sidebar-link">常用库</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#key" class="sidebar-link">key</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#表单" class="sidebar-link">表单</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/code.html#diff-算法" class="sidebar-link">diff 算法</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/interview.html" class="sidebar-link">面试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#项目经历描述" class="sidebar-link">项目经历描述</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#刷题" class="sidebar-link">刷题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#运行时的一些概念" class="sidebar-link">运行时的一些概念</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#浏览器工作原理" class="sidebar-link">浏览器工作原理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#you-think-you-know-javascript" class="sidebar-link">You think you know JavaScript?</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#xhtml-与-html-的不同" class="sidebar-link">XHTML 与 HTML 的不同</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#wai-aria" class="sidebar-link">WAI-ARIA</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#meta-元素" class="sidebar-link">meta 元素</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#a-元素的功能" class="sidebar-link">A 元素的功能</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#img-新增实用属性" class="sidebar-link">IMG 新增实用属性</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#h5新增日期类型-chrome" class="sidebar-link">H5新增日期类型（chrome）</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#iframe" class="sidebar-link">Iframe</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#多媒体元素" class="sidebar-link">多媒体元素</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#bef-和-margin-collapse" class="sidebar-link">BEF 和 Margin Collapse</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#关于定位" class="sidebar-link">关于定位</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#恶补css知识点" class="sidebar-link">恶补CSS知识点</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/interview.html#网络" class="sidebar-link">网络</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/algorithm.html" class="sidebar-link">算法学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#算法之旅" class="sidebar-link">算法之旅</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#bitmap算法" class="sidebar-link">Bitmap算法</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#hashmap" class="sidebar-link">HashMap</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#入门到放弃-动态规划" class="sidebar-link">入门到放弃：动态规划</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#思想" class="sidebar-link">思想</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#一般步骤" class="sidebar-link">一般步骤</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#例子" class="sidebar-link">例子</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#滑动窗口算法" class="sidebar-link">滑动窗口算法</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#二叉树" class="sidebar-link">二叉树</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#二叉堆" class="sidebar-link">二叉堆</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#图遍历算法-dfs-bfs" class="sidebar-link">图遍历算法(DFS/BFS)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#dfs-递归" class="sidebar-link">DFS(递归)</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#bfs" class="sidebar-link">BFS</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/algorithm.html#回溯算法" class="sidebar-link">回溯算法</a></li></ul></li><li><a href="/frontend-blog/guide/webview.html" class="sidebar-link">WebView</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#pc端内嵌交互" class="sidebar-link">PC端内嵌交互</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#pc端认证流程" class="sidebar-link">PC端认证流程</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#移动端内嵌交互-webview" class="sidebar-link">移动端内嵌交互（webView）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#jsbridge-的实现原理" class="sidebar-link">JSBridge 的实现原理</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#jsbridge-设计规范" class="sidebar-link">JSBridge 设计规范</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#deeplinks" class="sidebar-link">DeepLinks</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#webviewjavascriptbridge" class="sidebar-link">WebViewJavascriptBridge</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#h5-多个webview-通信" class="sidebar-link">H5 多个webview 通信</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#移动端认证流程" class="sidebar-link">移动端认证流程</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#联调注意事项" class="sidebar-link">联调注意事项</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#核心的坑" class="sidebar-link">核心的坑</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/webview.html#问题" class="sidebar-link">问题</a></li></ul></li><li><a href="/frontend-blog/guide/requirements.html" class="sidebar-link">代码实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#编码风格" class="sidebar-link">编码风格</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#开发前可考虑的事情" class="sidebar-link">开发前可考虑的事情</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#oop的设计步骤" class="sidebar-link">OOP的设计步骤</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#测试驱动开发的具体实践" class="sidebar-link">测试驱动开发的具体实践</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#typescript-运用" class="sidebar-link">Typescript 运用</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#定制化构想" class="sidebar-link">定制化构想</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/requirements.html#领域驱动设计" class="sidebar-link">领域驱动设计</a></li></ul></li><li><a href="/frontend-blog/guide/cooperation.html" class="sidebar-link">协作的实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cooperation.html#阅读源码-etherpad" class="sidebar-link">阅读源码（etherpad）</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/cooperation.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li><li><a href="/frontend-blog/guide/design.html" class="sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/design.html#惰性单例模式" class="sidebar-link">惰性单例模式</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/design.html#发布订阅vs观察者" class="sidebar-link">发布订阅vs观察者</a></li></ul></li><li><a href="/frontend-blog/guide/tool.html" class="sidebar-link">写过的python小工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#环境准备" class="sidebar-link">环境准备</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#国际化" class="sidebar-link">国际化</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#爬虫" class="sidebar-link">爬虫</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#收集外刊资料" class="sidebar-link">收集外刊资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#项目发布" class="sidebar-link">项目发布</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#代码生成" class="sidebar-link">代码生成</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#代码分析" class="sidebar-link">代码分析</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#自动化测试" class="sidebar-link">自动化测试</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#自动下载并安装软件" class="sidebar-link">自动下载并安装软件</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#linux-初始化node-环境shell-脚本" class="sidebar-link">Linux 初始化node 环境shell 脚本</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#获取github符号条件的用户" class="sidebar-link">获取github符号条件的用户</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#依赖安装" class="sidebar-link">依赖安装</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#参考资料" class="sidebar-link">参考资料</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/tool.html#可能的错误" class="sidebar-link">可能的错误</a></li></ul></li></ul></li><li><a href="/frontend-blog/guide/solution.html" class="sidebar-link">记录重构心路思考</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#我的核心" class="sidebar-link">我的核心</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#遇到的问题" class="sidebar-link">遇到的问题</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#重构到底重构什么" class="sidebar-link">重构到底重构什么</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#整个架构组成的思考的角度" class="sidebar-link">整个架构组成的思考的角度</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#开发的原则" class="sidebar-link">开发的原则</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#维护的原则" class="sidebar-link">维护的原则</a></li><li class="sidebar-sub-header"><a href="/frontend-blog/guide/solution.html#todo-list" class="sidebar-link">Todo List</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h2> <p>Why: 解决代码的拆分问题<br>
What: 现代JavaScript 应用程序的静态模块打包工具,能做代码转换、文件优化、代码分割、模块合并、自动刷新、代码校验、自动发布<br>
How: 构建依赖图，生成chunk<br>
通过官网可以知道关键概念：<br>
Entry：构建第一步从entry开始。<br>
Module:一个模块对应一个文件，webpack会从entry开始，递归找出所有依赖的模块。<br>
Chunk：代码块，一个Chunk由多个模块组合而成，用于代码合并与分割。<br>
Loader: loader 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）.<br>
Plugin:loader 被用于转换某些类型的模块,而插件则可以用于执行范围更广的任务。
插件的范围包括,从打包优化和压缩,一直到重新定义环境中的变量。插件接口功能极其强大,可以用来处理各种各样的任务。</p> <p>先浏览了一下package.json,依赖了哪些。<br>
发现了不少第一次见到的库<span class="emoj">🙉</span></p> <ol><li>json-schema-to-typescript, json schema 校验格式是否规范</li> <li>memory-fs, node原生fs模块内存版(in-memory)的完整功能实现。<br>
memory-fs是内存缓存和快速数据处理的完美替代方案。webpack间过程中打包的文件<br>
是利用这个放到内存，减少了代码写入文件的开销。<br>
实现原理：把数据都放到一个js 对象里面，实现文件的几个api.</li> <li>rimraf， 递归删除目录所有文件</li> <li>graceful-fs, 可以替代fs模块，是对fs模块的改进，使不同平台和环境之间的行为规范化，并使文件系统访问对错误的恢复更具弹性。</li> <li>vm, 提供了在 V8 虚拟机上下文中编译和运行代码的一系列 API。JavaScript 代码可以被编译并立即运行，也可以编译、保存，以后再运行。</li> <li>Tapable,公开了许多Hook类，可用于为插件创建钩子。专注于自定义事件的触发和处理。</li> <li>source-map，是一个存储了打包前所有代码的行，列信息的mapping文件,,以及VLQ编码的字母记录着转换前的代码的位置。</li> <li>benchmark，代码基准测试，分析代码性能。</li> <li>portfinder, 自动获取端口.</li> <li>serve-index, 将文件夹中文件列表显示到浏览器中.<a href="https://www.cnblogs.com/zhaoweikai/p/9662572.html" target="_blank" rel="noopener noreferrer">具体<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>internal-ip,获取内网IP地址.</li></ol> <h3 id="整体流程"><a href="#整体流程" class="header-anchor">#</a> 整体流程</h3> <p>Webpack 的运行流程是一个串行的过程<br>
• 初始化参数 从配置文件和 Shell 语句中读取与合并参数，得出最终的参数<br>
• 开始编译：用上一步得到的参数初始Compiler 对象，加载所有配置的插件，通
过执行对象的 run 方法开始执行编译<br>
• 确定入口:根据配置中的 Entry 找出所有入口文件<br>
• 编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出
模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理<br>
• 完成模块编译:在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被
翻译后的最终内容及它们之间的依赖关系。<br>
• 输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk,
再将每个 Chunk 转换成一个单独的文件加入输出列表中，这是可以修改输出内容
的最后机会<br>
• 输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，将文件的内
容写入文件系统中。
以上过程中， Webpack 会在特定的时间点广播特定的事件，插件在监听到感兴趣的
事件后会执行特定的逻辑，井且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行
结果。</p> <h3 id="参数管理"><a href="#参数管理" class="header-anchor">#</a> 参数管理</h3> <p>使用json-schema-to-typescript去生成<br>
/declarations   .ts 文件<br>
结合jsdoc 引入类型声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
@typedef {import(&quot;../declarations/plugins/
 ProgressPlugin&quot;).HandlerFunction} HandlerFunction 
**/</span>
</code></pre></div><p>用schema-utils去校验传入的参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> validateOptions <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;schema-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../schemas/plugins/DllPlugin.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">validateOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Dll Plugin&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">baseDataPath</span><span class="token operator">:</span> <span class="token string">&quot;options&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token operator">...</span>options<span class="token punctuation">,</span>
			<span class="token literal-property property">entryOnly</span><span class="token operator">:</span> options<span class="token punctuation">.</span>entryOnly <span class="token operator">!==</span> <span class="token boolean">false</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="构建依赖图"><a href="#构建依赖图" class="header-anchor">#</a> 构建依赖图</h3> <h3 id="输出"><a href="#输出" class="header-anchor">#</a> 输出</h3> <p>webpack 通过 manifest，可以追踪所有模块到输出 bundle 之间的映射.<br>
可以安装webpack-manifest-plugin
查看打包后的manifest。</p> <h3 id="构建优化"><a href="#构建优化" class="header-anchor">#</a> 构建优化</h3> <p>对于 HTTP/2，可以使用代码分离来实现最佳构建结果<br> <a href="https://github.com/webpack/webpack/tree/master/examples/http2-aggressive-splitting" target="_blank" rel="noopener noreferrer">http2-aggressive-splitting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="相关插件"><a href="#相关插件" class="header-anchor">#</a> 相关插件</h3> <ol><li>webpack-dev-server</li> <li>webpack-dev-middleware：它作为一个容器，将 webpack 编译后的文件存储到内存中，然后在用户访问 express 服务时，将内存中对应的资源输出返回。</li></ol> <h2 id="vue"><a href="#vue" class="header-anchor">#</a> vue</h2> <p><a href="https://juejin.im/post/5e04411f6fb9a0166049a073#heading-23" target="_blank" rel="noopener noreferrer">12道vue高频原理面试题,你能答出几道?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://segmentfault.com/a/1190000019386190" target="_blank" rel="noopener noreferrer">router 工作原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">vue 专题</p> <ol><li>如何理解MVVM原理?</li> <li>响应式数据的原理是什么?</li> <li>Vue中是如何检测数组变化?劫持数组，改写数组方法</li> <li>为何Vue采用异步渲染?每一次状态发生变化后，状态变化的信号会发送给组件，组件内部使用VirtualDOM进行计算得出需要更新的具体的DOM节点，然后对DOM进行更新操作，每次更新状态后的渲染过程需要更多的计算，而这种无用功也将浪费更多的性能，所以异步渲染变得更加至关重要。</li> <li>nextick实现原理?</li> <li>vue组件的生命周期?</li> <li>Ajax请求放在哪个生命周期中?</li> <li>何时需要使用beforeDestroy? 清除自己定义的定时器，事件解绑</li> <li>Vue父子组件生命周期调用顺序?</li> <li>Vue中Computed的特点?</li> <li>Watch中的deep:true是如何实现的?</li> <li>Vue中事件绑定的原理?</li> <li>Vue中v-html会导致哪些问题?</li> <li>Vue中v-if和v-show的区别?</li> <li>为什么V-for和v-if不能连用</li> <li>v-model中的实现原理及如何自定义v-model?</li> <li>组件中的data为什么是一个函数? 因为组件是可以复用的,JS 里对象是引用关系,如果组件 data 是一个对象,那么子组件中的 data 属性值会互相污染,产生副作用。
所以一个组件的 data 选项必须是一个函数,因此每个实例可以维护一份被返回对象的独立的拷贝。new Vue 的实例是不会被复用的,因此不存在以上问题。</li> <li>Vue组件如何通信?</li> <li>什么是作用域插槽?</li> <li>用vnode来描述一个DoM结构?</li> <li>diff算法的时间复杂度?O(n)</li> <li>简述Vue中diff算法原理?</li> <li>v-for中为什么要用key?</li> <li>描述组件渲染和更新过程?</li> <li>Vue中模板编译原理?<br>
模板字符串 转换成 element ASTs（解析器）<br>
对 AST 进行静态节点标记，主要用来做虚拟DOM的渲染优化（优化器）<br>
使用 element ASTs 生成 render 函数代码字符串（代码生成器）</li> <li>Vue中常见性能优化?</li> <li>Vue中相同逻辑如何抽离?</li> <li>为什么要使用异步组件?</li> <li>谈谈你对keep-alive的了解?</li> <li>实现hash路由和history路由</li> <li>Vue-Router中导航守卫有哪些?</li> <li>action和mutation区别<br>
流程顺序:“相应视图—&gt;修改State”拆分成两部分，视图触发Action，Action再触发Mutation。
角色定位:基于流程顺序，二者扮演不同的角色。<br>
Mutation：专注于修改State，理论上是修改State的唯一途径。
Action：业务代码、异步请求。
限制:角色不同，二者有不同的限制。
Mutation：必须同步执行。
Action：可以异步，但不能直接操作State。</li> <li>简述Vuex工作原理</li> <li>Vue3.0你知道有哪些改进?<br>
virtual DOM 完全重写，mounting &amp; patching 提速 100%；<br>
更多编译时 （compile-time）提醒以减少 runtime 开销；<br>
基于 Proxy 观察者机制以满足全语言覆盖以及更好的性能；<br>
优化插槽生成(Optimized Slots Generation):以单独重新渲染父组件和子组件<br>
静态树提升(Static Tree Hoisting):Vue 3 的编译器将能够检测到什么是静态组件，然后将其提升，从而降低了渲染成本。它将能够跳过未整个树结构打补丁的过程。
静态属性提升（Static Props Hoisting）<br>
更易于开发使用: import {Observer }  from 'vue'<br>
新的 core runtime：~ 10kb gzipped；<br>
实验性的 Time Slicing 支持:有许多组件同时尝试重新渲染时，任何浏览器都可以开始变得很慢，从而使用户体验下降。
尝试使用 Time Slicing，将 JS 的执行分解为几个部分，如果有用户交互需要处理，这些部分将提供给浏览器。</li></ol></div> <p>答：没看答案之前，答上了一半。<span class="emoj">🙉</span>我根据API的表现形式，猜测出大概实现方式，但是还是有没有
反应过来的。我不喜欢人家问你看过XX的源码吗？没有（<span class="emoj">😒</span>）|有（<span class="emoj">😍</span>）。<br>
因为有自己没有想到的思路，才推动了我去看源码的兴趣。<br>
核心：发布订阅模式Dep+object.defineproperty数据劫持</p> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h3> <p>创建 Observer 实例观察数据，Observer 又创建 Dep , Dep 用来维护订阅者。然后创建 Watcher 实例提供 update函数。一旦数据变动，就层层执行回调函数。</p> <h3 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h3> <ol><li>它是个vue 组件,负责渲染子组件</li> <li>用一个cache对象存对应组件：cache[vnode.key]=componentInstance;</li> <li>监听include,exclude, 发生变更的时候就对应操作cache对象。</li> <li>将最近访问的组件 push 到 this.keys 最后面,this.keys[0]也就是最久没被访问的组件,当缓存实例超过 max 设置值,删除 this.key[0]<br>
keep-alive 使用的是LRU缓存机制，<a href="https://github.com/nibilin33/Interviews/blob/master/codes/146.lru%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6.js" target="_blank" rel="noopener noreferrer">LRU实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h3 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> nextTick</h3> <ol><li>用一个队列存再包装的function,function里面执行cb</li> <li>timerFunc 主要是利用setTimeout等让callback放入任务队列去等待下一次空闲时候执行。</li> <li>MutationObserver 这个api不常用，了解了一下</li></ol> <blockquote><p>MutationObserver接口提供了监视对DOM树所做更改的能力
disconnect()
阻止 MutationObserver 实例继续接收的通知，直到再次调用其observe()方法，该观察者对象包含的回调函数都不会再被调用。<br>
observe()<br>
配置MutationObserver在DOM更改匹配给定选项时，通过其回调函数开始接收通知。<br>
takeRecords()<br>
从MutationObserver的通知队列中删除所有待处理的通知，并将它们返回到MutationRecord对象的新Array中。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">nextTick</span> <span class="token punctuation">(</span><span class="token parameter">cb<span class="token operator">?</span><span class="token operator">:</span> Function<span class="token punctuation">,</span> ctx<span class="token operator">?</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _resolve
  callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> <span class="token string">'nextTick'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_resolve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">_resolve</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pending <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token function">timerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cb <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      _resolve <span class="token operator">=</span> resolve
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="v-on-v-bind-v-model"><a href="#v-on-v-bind-v-model" class="header-anchor">#</a> v-on,v-bind,v-model</h3> <p>v-model 是v-on 和v-bind的语法糖</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;sth&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input v<span class="token operator">-</span>bind<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;sth&quot;</span> v<span class="token operator">-</span>on<span class="token operator">:</span>input<span class="token operator">=</span><span class="token string">&quot;sth = $event.target.value&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>简单来说，就是包了层方法去执行<br>
on</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">on</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> ASTDirective</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> dir<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">v-on without argument does not support modifiers.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  el<span class="token punctuation">.</span><span class="token function-variable function">wrapListeners</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">code</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_g(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>bind</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> ASTDirective</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span><span class="token function-variable function">wrapData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">code</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_b(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>el<span class="token punctuation">.</span>tag<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
      dir<span class="token punctuation">.</span>modifiers <span class="token operator">&amp;&amp;</span> dir<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>prop <span class="token operator">?</span> <span class="token string">'true'</span> <span class="token operator">:</span> <span class="token string">'false'</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
      dir<span class="token punctuation">.</span>modifiers <span class="token operator">&amp;&amp;</span> dir<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>sync <span class="token operator">?</span> <span class="token string">',true'</span> <span class="token operator">:</span> <span class="token string">''</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="v-if、v-show、v-html-v-for"><a href="#v-if、v-show、v-html-v-for" class="header-anchor">#</a> v-if、v-show、v-html,v-for</h3> <p>都是将指令解析到AST，然后用AST生成代码字符串，最后在虚拟DOM渲染时候触发指令钩子函数让指令生效。<br>
提到AST，有在线的展示js代码解析成AST的样子<a href="https://astexplorer.net/" target="_blank" rel="noopener noreferrer">https://astexplorer.net/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="key-的作用"><a href="#key-的作用" class="header-anchor">#</a> key 的作用</h3> <p>我的理解：更快地定位到要比较的节点找出差异，不用一层层找。就优化了diff算法 。<br>
diff 算法核心：updateChildren方法<span class="emoj">🙉</span><br>
太多......if elseif elseif......冷静下来，画一下图（<span class="emoj">🙉</span>字忽略）....<br>
核心思想：尽量复用相同节点，所以会从旧节点里面找到和新节点一样的，进行移动。</p> <!----> <p>我按着这个思路写了一个简易版...<span class="emoj">🙉</span> <a href="https://github.com/nibilin33/Interview-Days/blob/master/code-practice/3-12/vue-diff.js" target="_blank" rel="noopener noreferrer">vue-diff<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="vuex"><a href="#vuex" class="header-anchor">#</a> vuex</h3> <p>核心：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>_watcherVM <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>本质： 就是一个没有template的vue对象。</p> <h3 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h3> <p>看了眼install.js文件...离不开数据劫持<br>
router 基本依托于window.history的api,
那么url与组件的渲染匹配关系本质上利用了vue的响应式属性，<br>
在route属性变更和router-view视图渲染之间建立关系。</p> <div class="language-js extra-class"><pre class="language-js"><code>  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">beforeCreate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>router<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_routerRoot <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_router <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>router
        <span class="token keyword">this</span><span class="token punctuation">.</span>_router<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        Vue<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'_route'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_router<span class="token punctuation">.</span>history<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_routerRoot <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>_routerRoot<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span>
      <span class="token punctuation">}</span>
      <span class="token function">registerInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">registerInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'$router'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_routerRoot<span class="token punctuation">.</span>_router <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'$route'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_routerRoot<span class="token punctuation">.</span>_route <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="vue-server-renderer"><a href="#vue-server-renderer" class="header-anchor">#</a> vue-server-renderer</h3> <p>原理：虚拟dom(用JavaScript模拟DOM树，并渲染这个DOM树，变更的时候把差异对象应用到渲染的DOM树。)<br>
主要方法：renderToString<br>
就找到核心renderNode(component._render(), true, context);
利用vue的私有_render方法，把组件转成html之后返回客户端。<br>
顺藤摸瓜，找到_render,从_render找createElement,然后找到<a href="https://github.com/snabbdom/snabbdom" target="_blank" rel="noopener noreferrer">虚拟dom<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的算法来源。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> vnode
  <span class="token punctuation">}</span><span class="token punctuation">;</span>  
  <span class="token comment">/**
 * Virtual DOM patching algorithm based on Snabbdom by
 * Simon Friis Vindum (@paldepind)
 * Licensed under the MIT License
 * https://github.com/paldepind/snabbdom/blob/master/LICENSE
 *
 * modified by Evan You (@yyx990803)
 *
 * Not type-checking this because this file is perf-critical and the cost
 * of making flow understand it is not worth it.
 */</span>
</code></pre></div><h2 id="babel"><a href="#babel" class="header-anchor">#</a> babel</h2> <p>Babel 是一个 JavaScript 编译器<br>
Babel 是一个工具链，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容的 JavaScript 语法，以便能够运行 在当前和旧版本的浏览器或其他环境中。<br>
功能：<br>
语法转换<br>
通过 Polyfill 方式在目标环境中添加缺失的特性 (通过 @babel/polyfill 模块)</p> <div class="custom-block tip"><p class="custom-block-title">源码转换 (codemods)</p> <p>第1步 解析（Parse）<br>
通过解析器babylon将代码解析成抽象语法树。<br>
第2步 转换（TransForm）<br>
通过babel-traverse plugin对抽象语法树进行深度优先遍历，遇到需要转换的，就直接在AST对象上对节点进行添加、更新及移除操作，比如遇到箭头函数，就转换成普通函数，最后得到新的AST树。<br>
第3步 生成（Generate）
通过babel-generator将AST树生成es5代码。</p></div> <ol><li>transform-runtime<br>
为了解决全局对象或者全局对象方法编译不足的情况，才出现了transform-runtime这个插件，
但是它只会对es6的语法进行转换，而不会对新api进行转换</li></ol> <p>参考<br> <a href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md" target="_blank" rel="noopener noreferrer">Babel 插件手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://github.com/jamiebuilds/the-super-tiny-compiler" target="_blank" rel="noopener noreferrer">the-super-tiny-compiler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="express"><a href="#express" class="header-anchor">#</a> express</h2> <h2 id="lodash"><a href="#lodash" class="header-anchor">#</a> lodash</h2> <p>看到一段很妙的正则<br>
解析'a[0].b.c'这种格式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rePropName <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|([&quot;'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reEscapeChar <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\(\\)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rePropName<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> number<span class="token punctuation">,</span> quote<span class="token punctuation">,</span> subString</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>quote <span class="token operator">?</span> subString<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reEscapeChar<span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>number <span class="token operator">||</span> match<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>反向引用 \1. \2...
表达式在匹配时，表达式引擎会将小括号 &quot;( )&quot; 包含的表达式所匹配到的字符串记录下来。在获取匹配结果的时候，小括号包含的表达式所匹配到的字符串可以单独获取</li> <li>?: 匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用<br> <strong>这瞬间启发了我，好几个手写题</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> template <span class="token operator">=</span> <span class="token string">'我是{{name}}，年龄{{age}}，性别{{sex}}'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">template<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">{{(\w+)}}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span>name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出：我是姓名，年龄18，性别undefined</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">&quot;get-element-by-id&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 转化为 getElementById</span>
<span class="token keyword">function</span> <span class="token function">caseIgnore</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-(\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//return '1.087.654.321'</span>
<span class="token keyword">function</span> <span class="token function">parseToMoney</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d)(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> sm <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> sm<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> match<span class="token operator">+</span><span class="token string">','</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> res<span class="token operator">+</span><span class="token punctuation">(</span>sm<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">?</span><span class="token string">'.'</span><span class="token operator">+</span>sm<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener noreferrer">正则手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://blog.csdn.net/chencye/article/details/51635391" target="_blank" rel="noopener noreferrer">正则之环视<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="react"><a href="#react" class="header-anchor">#</a> react</h2> <div class="custom-block tip"><p class="custom-block-title">react 专题</p> <ol><li><p>react key的作用？如果出现了相同的key怎么办？</p></li> <li><p>React 中的 setState 为什么需要异步操作？</p></li> <li><p>React 应用如何在重新加载页面时保留数据？</p></li> <li><p>使用 React Hooks 的同时为什么需要使用高阶组件？</p></li> <li><p>Ajax 请求放在 componentDidMount 里进行处理还是放在componentWillMount 里进行处理比较合适？<br>
AJAX请求应在 componentDidMount函数 进行请求。</p></li> <li><p>React 在语法层面可以做哪些性能优化？<br>
PureComponent + Redux + immutable-js / immutability-helper<br>
Redux -&gt;  Redux Toolkit<br>
组件库按需加载<br>
动态 Ployfill<br>
Tree Shaking<br>
路由懒加载<br>
Hooks useCallback<br>
React Fragments<br>
构建函数中的事件 bind 处理<br>
避免使用内联样式属性<br>
JSX 中合理控制条件渲染的范围（避免无谓的重复渲染）<br>
key<br>
保持 state 中数据必响应的特性</p></li> <li><p>React 使用场景？<br>
逻辑复杂单页应用，偏中后台管理系统，纯展示性的UI页面不合适</p></li> <li><p>描述一下React 生命周期</p></li> <li><p>实现组件有哪些方式？<br>
React.createClass 使用API来定义组件
React ES6 class component 用 ES6 的class 来定义组件
Functional stateless component 通过函数定义无状态组件</p></li> <li><p>shouldComponentUpdate函数有什么作用？<br>
shouldComponentUpdate是一个允许我们自行决定某些组件（以及他们的子组件）是否进行更新的生命周期函数，<br>
reconciliation的最终目的是尽可能以最有效的方式去根据新的state更新UI，<br>
如果你已经知道UI的哪些状态无需进行改变，就没必要去让React去判断它是否该改变。<br>
让shouldComponentUpdate返回falss, React就会让当前的组件和其子组件保持不变。</p></li> <li><p>当组件的setState函数被调用之后，发生了什么？<br>
React会做的第一件事就是把你传递给setState的参数对象合并到组件原先的state。<br>
这个事件会导致一个“reconciliation”（调和）的过程。<br>
reconciliation的最终目标就是，尽可能以最高效的方法，去基于新的state来更新UI。<br>
为了达到这个目的，React会构建一个React元素树（你可以把这个想象成一个表示UI的一个对象）。一旦这个树构建完毕,React为了根据新的state去决定UI要怎么进行改变，它会找出这棵新树和旧树的不同之处。<br>
React能够相对精确地找出哪些位置发生了改变以及如何发生了什么变化，并且知道如何只通过必要的更新来最小化重渲染。</p></li> <li><p>React-router 路由的实现原理？</p></li> <li><p>说说React Native,Weex框架的实现原理？</p></li> <li><p>受控组件(Controlled Component)与非受控组件(Uncontrolled Component)的区别<br>
受控组件</p></li> <li><p>没有维持自己的状态</p></li> <li><p>数据由父组件控制</p></li> <li><p>通过 props 获取当前值，然后通过回调通知更改	
非受控组件</p></li> <li><p>保持着自己的状态</p></li> <li><p>数据由 DOM 控制</p></li> <li><p>Refs 用于获取其当前值</p></li> <li><p>refs 是什么?<br>
Refs是能访问DOM元素或组件实例的一个函数；</p></li> <li><p>React为什么自己定义一套事件体系呢，与浏览器原生事件体系有什么关系？</p></li> <li><p>什么时候应该选择用class实现一个组件，什么时候用一个函数实现一个组件？<br>
组件用到了state或者用了生命周期函数，那么就该使用Class component。其他情况下，应使用Functional component。</p></li> <li><p>什么是HoC（Higher-Order Component）？适用于什么场景？<br>
高阶组件就是一个 React 组件包裹着另外一个 React 组件</p></li> <li><p>并不是父子关系的组件，如何实现相互的数据通信？<br>
使用父组件，通过props将变量传入子组件（如通过refs，父组件获取一个子组件的方法，简单包装后，将包装后的方法通过props传入另一个子组件）</p></li> <li><p>Redux是如何做到可预测呢？<br>
总是存在一个真实来源，即 store ，因此不存在如何将当前状态与动作和应用的其他部分同步的问题。</p></li> <li><p>Redux将React组件划分为哪两种？</p></li> <li><p>Redux是如何将state注入到React组件上的？</p></li> <li><p>请描述一次完整的 Redux 数据流</p></li> <li><p>React的批量更新机制 BatchUpdates？</p></li> <li><p>React与Vue，各自的组件更新进行对比，它们有哪些区别？</p></li></ol></div> <h3 id="常用库"><a href="#常用库" class="header-anchor">#</a> 常用库</h3> <ol><li>react-dom:提供了可在应用顶层使用的 DOM（DOM-specific）方法<a href="https://react.docschina.org/docs/react-dom.html" target="_blank" rel="noopener noreferrer">api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>classnames:方便动态绑定样式</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>addColor
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>标题<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div><ol start="3"><li>react-css-modules<br>
原来的样式写法</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./table.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Table</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>table<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>row<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>cell<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token constant">A0</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>cell<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token constant">B0</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>存在问题：</p> <ol><li>你必须使用驼峰式类名。</li> <li>无论何时构建一个 className 你都必须使用 style 对象。</li> <li>混合类模块以及全局 CSS 类不够灵活。</li> <li>引用一个未定义的 CSS 模块时解析结果为 undefined ,但并无相关警告提示。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CSSModules <span class="token keyword">from</span> <span class="token string">'react-css-modules'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./table.css'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Table</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div styleName<span class="token operator">=</span><span class="token string">'table'</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div styleName<span class="token operator">=</span><span class="token string">'row'</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div styleName<span class="token operator">=</span><span class="token string">'cell'</span><span class="token operator">&gt;</span><span class="token constant">A0</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div styleName<span class="token operator">=</span><span class="token string">'cell'</span><span class="token operator">&gt;</span><span class="token constant">B0</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">CSSModules</span><span class="token punctuation">(</span>Table<span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>events<br>
主要用到EventEmitter</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>EventEmitter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'event'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">;</span>

emiter<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
<span class="token comment">// 为指定事件添加一个监听器到监听器数组的尾部。</span>
emiter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
<span class="token comment">//为指定事件注册一个监听器，接受一个字符串 event 和一个回调函数。</span>
emiter<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
<span class="token comment">//为指定事件注册一个单次监听器，即 监听器最多只会触发一次，触发后立刻解除该监听器</span>
emiter<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
<span class="token comment">//移除指定事件的某个监听器，监听器必须是该事件已经注册过的监听器。</span>
emiter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token punctuation">[</span>arg1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//按参数的顺序执行每个监听器，如果事件有注册监听返回 true，否则返回 false。</span>
</code></pre></div><ol start="5"><li>react-core-decorators<br>
用装饰器写mixin</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PureRenderMixin <span class="token keyword">from</span> <span class="token string">'react-addons-pure-render-mixin'</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> mixin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-core-decorators'</span><span class="token punctuation">;</span>  
@<span class="token function">mixin</span><span class="token punctuation">(</span>PureRenderMixin<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>immutable<br> <a href="http://zhenhua-lee.github.io/react/Immutable.html" target="_blank" rel="noopener noreferrer">Immutable.js及在React中的应用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>redux :是JavaScript 状态容器，提供可预测化的状态管理<a href="http://cn.redux.js.org/" target="_blank" rel="noopener noreferrer">api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://mp.weixin.qq.com/s/oVEoDLPWYrfbgAxZXCgOeQ" target="_blank" rel="noopener noreferrer">理解Redux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>react-router <a href="http://react-guide.github.io/react-router-cn/docs/API.html" target="_blank" rel="noopener noreferrer">api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>react-router-redux:将react router 与 redux store 绑定,管理路由状态</li> <li>redux-thunk: 处理异步等副作用操作<a href="https://zhuanlan.zhihu.com/p/85403048" target="_blank" rel="noopener noreferrer">理解redux-thunk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>react-redux:将Redux结合React使用.react-redux 实现了一个简单的发布-订阅库，来监听当前 store 的变化.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>push<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-redux'</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="key"><a href="#key" class="header-anchor">#</a> key</h3> <ol><li>使用shortid作为key比index好些</li> <li>key 只是在兄弟节点之间必须唯一</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> shortid <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'shortid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">createNewTodo</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> shortid<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    text
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="表单"><a href="#表单" class="header-anchor">#</a> 表单</h3> <p>验证、追踪访问字段以及处理表单提交的完整解决方案：https://jaredpalmer.com/formik/</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
Greeting<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="diff-算法"><a href="#diff-算法" class="header-anchor">#</a> diff 算法</h3> <p>当对比两颗树时，React 首先比较两棵树的根节点。不同类型的根节点元素会有不同的形态。<br>
在默认条件下，当递归 DOM 节点的子元素时，React 会同时遍历两个子元素的列表；当产生差异时，生成一个 mutation。<br>
当子元素拥有 key 时，React 使用 key 来匹配原有树上的子元素以及最新树上的子元素</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-blog/guide/book.html" class="prev">
        读书笔记
      </a></span> <span class="next"><a href="/frontend-blog/guide/interview.html">
        面试
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-blog/assets/js/app.a1c6f5fb.js" defer></script><script src="/frontend-blog/assets/js/2.9d4f40a5.js" defer></script><script src="/frontend-blog/assets/js/15.3576902d.js" defer></script>
  </body>
</html>
