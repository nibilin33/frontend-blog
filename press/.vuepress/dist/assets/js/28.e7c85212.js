(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{182:function(a,e,t){"use strict";t.r(e);var s=t(0),n=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"pc端内嵌交互"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pc端内嵌交互","aria-hidden":"true"}},[a._v("#")]),a._v(" PC端内嵌交互")]),a._v(" "),t("p",[a._v("相互约定一个方法，终端会在加载的时候写入脚本方法，我们调用")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("window.sendMessageToPlatformFunc = function (data) {\n    if (window.sendMsgJs2Qt) {\n        window.sendMsgJs2Qt(data);\n    }\n}\n\nif (window.initData) {\n    window.initData();\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h2",{attrs:{id:"pc端认证流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pc端认证流程","aria-hidden":"true"}},[a._v("#")]),a._v(" PC端认证流程")]),a._v(" "),t("p",[a._v("终端在url上拼上code或者我们通过sendMessageToPlatformFunc向终端所要code，通过code向服务器换取token以及用户信息")]),a._v(" "),t("h2",{attrs:{id:"移动端内嵌交互（webview）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移动端内嵌交互（webview）","aria-hidden":"true"}},[a._v("#")]),a._v(" 移动端内嵌交互（webView）")]),a._v(" "),t("p",[a._v("移动端存在特殊的view，展示web页面控件。\n具体的可以看"),t("a",{attrs:{href:"https://blog.csdn.net/carson_ho/article/details/64904691",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://blog.csdn.net/carson_ho/article/details/64904691"),t("OutboundLink")],1),a._v("理解"),t("br"),a._v("\n具体实现可以看项目中MobilePlatform.js这个文件")]),a._v(" "),t("h2",{attrs:{id:"h5-多个webview-通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#h5-多个webview-通信","aria-hidden":"true"}},[a._v("#")]),a._v(" H5 多个webview 通信")]),a._v(" "),t("ol",[t("li")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("localStorage.setItem('message', 'hello');\nwindow.onstorage = evt => {\n    console.log(evt);\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li")]),a._v(" "),t("p",[a._v("postMessage 方法"),t("br"),a._v("\nwindow.addEventListener('message');")]),a._v(" "),t("h2",{attrs:{id:"移动端认证流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移动端认证流程","aria-hidden":"true"}},[a._v("#")]),a._v(" 移动端认证流程")]),a._v(" "),t("p",[a._v("1.内部项目：拿着应用ID向终端获取code，我们通过code向服务器换取token以及用户信息"),t("br"),a._v("\n2.工作台（集成第三方应用），所有信息都通过clientId向服务器获取重定向地址然后直接跳转")]),a._v(" "),t("h2",{attrs:{id:"联调注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#联调注意事项","aria-hidden":"true"}},[a._v("#")]),a._v(" 联调注意事项")]),a._v(" "),t("p",[a._v("1.PC端文件下载需要调用接口告诉客户端是要执行下载操作"),t("br"),a._v("\n2.移动端文件的相关同样需要调用他们的接口")]),a._v(" "),t("h2",{attrs:{id:"核心的坑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心的坑","aria-hidden":"true"}},[a._v("#")]),a._v(" 核心的坑")]),a._v(" "),t("p",[a._v("不管在自己的模拟器执行地多么完美，嵌入都会有意想不到的偏差，一定要真实环境验收。")]),a._v(" "),t("h2",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题","aria-hidden":"true"}},[a._v("#")]),a._v(" 问题")]),a._v(" "),t("p",[a._v("内嵌的web时常收到体验差的效果，除了在代码层面尽量压缩资源，最好的效果还是本地效应。"),t("br"),a._v("\n具体的见 "),t("router-link",{attrs:{to:"/guide/promto.html"}},[a._v("那些年做过的优化")])],1)])}),[],!1,null,null,null);e.default=n.exports}}]);