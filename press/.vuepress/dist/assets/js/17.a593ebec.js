(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{211:function(r,t,e){"use strict";e.r(t);var v=e(0),n=Object(v.a)({},(function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h2",{attrs:{id:"内嵌web加载慢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内嵌web加载慢","aria-hidden":"true"}},[r._v("#")]),r._v(" 内嵌web加载慢")]),r._v(" "),e("p",[r._v("优化的核心是让服务端的资源能够本地化"),e("br"),r._v(" "),e("strong",[r._v("方案一：PWA")]),e("br"),r._v("\n那么什么是PWA？")]),r._v(" "),e("blockquote",[e("p",[r._v("Progressive Web App, 简称 PWA，是提升 Web App 的体验的一种新方法，能给用户原生应用的体验。\nPWA 能做到原生应用的体验不是靠特指某一项技术，而是经过应用一些新技术进行改进，\n在安全、性能和体验三个方面都有很大提升，PWA 本质上是 Web App，\n借助一些新技术也具备了 Native App 的一些特性，兼具 Web App 和 Native App 的优点。")])]),r._v(" "),e("blockquote",[e("p",[r._v("PWA 的主要特点包括下面三点：")]),r._v(" "),e("ul",[e("li",[r._v("可靠 - 即使在不稳定的网络环境下，也能瞬间加载并展现")]),r._v(" "),e("li",[r._v("体验 - 快速响应，并且有平滑的动画响应用户的操作")]),r._v(" "),e("li",[r._v("粘性 - 像设备上的原生应用，具有沉浸式的用户体验，用户可以添加到桌面"),e("br"),r._v("\nPWA 本身强调渐进式，并不要求一次性达到安全、性能和体验上的所有要求，开发者可以通过 PWA Checklist 查看现有的特征。")])])]),r._v(" "),e("p",[r._v("具体的可以查看 "),e("a",{attrs:{href:"https://lavas.baidu.com/pwa/README",target:"_blank",rel:"noopener noreferrer"}},[r._v("https://lavas.baidu.com/pwa/README"),e("OutboundLink")],1),e("br"),r._v("\n或者 "),e("a",{attrs:{href:"https://lavas-project.github.io/pwa-book/",target:"_blank",rel:"noopener noreferrer"}},[r._v("PWA 应用实战"),e("OutboundLink")],1),e("br"),r._v(" "),e("strong",[r._v("想法")]),e("br"),r._v("\nPWA请求一次后资源都缓存在本地了，可以利用这个特点，在终端启动的时候先请求"),e("br"),r._v("\n往后所有资源都可以在缓存里面拿，当资源需要更新的时候，Service Worker 也提供"),e("br"),r._v("\n更新资源的方法。"),e("br"),r._v("\n这样从缓存到更新所有策略都无需终端干涉，终端目测只要修改cef的一些配置。"),e("br"),r._v("\n但目前来看，server-workder 有https,或者127.0.0.1 的限制。"),e("br"),r._v("\n如果为http请求无法注册成功。")]),r._v(" "),e("p",[e("strong",[r._v("方案二：")]),e("br"),r._v("\n终端在请求到html的时候，写入一个js脚本，这个脚本做资源判断，"),e("br"),r._v("\n如果资源和本地一致，替换成本地资源路径。"),e("br"),r._v("\n如果存在不一致，先使用远程的。并且需要下载资源包进行替换。")]),r._v(" "),e("p",[e("strong",[r._v("方案三：")]),e("br"),r._v("\n前提：本地已经下载好资源。"),e("br"),r._v("\n用file协议直接打开index.html，前端路由模式需要改成hash。"),e("br"),r._v("\n在ajax请求方面，如果webview能够拦截请求，需要判断是请求资源还是接口请求。"),e("br"),r._v("\n如果是接口请求，需要加上服务器地址。"),e("br"),r._v("\n如果无法拦截，就需要向终端获取服务器地址。"),e("br"),r._v("\n本地更新策略采用定时请求版本情况，发现版本变更，下载资源包替换。"),e("br"),r._v("\n这个大概由原来无感知更新变成有感知更新。")]),r._v(" "),e("h2",{attrs:{id:"大数据量情况的性能问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大数据量情况的性能问题","aria-hidden":"true"}},[r._v("#")]),r._v(" 大数据量情况的性能问题")]),r._v(" "),e("h2",{attrs:{id:"内存泄漏问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内存泄漏问题","aria-hidden":"true"}},[r._v("#")]),r._v(" 内存泄漏问题")])])}),[],!1,null,null,null);t.default=n.exports}}]);