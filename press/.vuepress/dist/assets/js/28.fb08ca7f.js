(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{208:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"èµ·æ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èµ·æ­¥","aria-hidden":"true"}},[t._v("#")]),t._v(" èµ·æ­¥")]),t._v(" "),a("h2",{attrs:{id:"é‡åˆ°çš„é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é‡åˆ°çš„é—®é¢˜","aria-hidden":"true"}},[t._v("#")]),t._v(" é‡åˆ°çš„é—®é¢˜")]),t._v(" "),a("ol",[a("li",[t._v("async,await è¯­æ³•æŠ¥é”™")])]),t._v(" "),a("p",[t._v("è¯¦æƒ…->æœ¬åœ°è®¾ç½®->ES6è½¬ES5é€‰é¡¹å»æ‰")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("canvas ç»˜åˆ¶æœ¬åœ°å›¾ç‰‡")])]),t._v(" "),a("p",[t._v("å®˜ç½‘åªæåˆ°ç½‘ç»œå›¾ç‰‡è¦å…ˆä¸‹è½½ï¼Œä½†æˆ‘éœ€è¦çš„æ˜¯ç»˜åˆ¶æœ¬åœ°å›¾ç‰‡=-=ï¼Œapiä¸Šä¹Ÿæ²¡æœ‰"),a("br"),t._v("\nçœ‹åˆ°å¾ˆæ˜ç¡®çš„ç”¨æ³•, æ‰¾äº†ä¸€ä¸‹å‘ç°å¯ä»¥ç”¨createImage")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("export const getImage = source => {\n  return new Promise(async (resolve, reject) => {\n    //åˆ›å»ºå›¾ç‰‡å¯¹è±¡\n    const canvas = await getCanvasById('#games');\n    let img = canvas.createImage();\n    img.src = source;\n    img.onload = () =>{\n        resolve(img);\n    }\n  });\n};\n\nasync draw() {\n    if(!this.img) {\n        this.img = await getImage(bg);\n    }\n    this.context.drawImage(this.img,-this.x,0,this.width,this.height);\n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("çœŸæœºè°ƒè¯•HTMLCanvasView is not defined")])]),t._v(" "),a("p",[t._v("è®©äººç»æœ›çš„ï¼Œå·¥å…·é‡Œé¢éƒ½èƒ½è¿è¡Œï¼Œæ”¾åˆ°æ‰‹æœºå¼€å§‹æŠ¥é”™ã€‚\næœ€ååœ¨å®˜ç½‘æ‰¾åˆ°ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯canvasæœ€æ–°çš„æ¥å£å†™æ³•...\nçœŸæœºè¿˜ä¸æ”¯æŒğŸ™‰çœŸçš„æ˜¯è®©äººç»æœ›...")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const ctx =  wx.createCanvasContext('games');\nctx.drawImage(\n      this.img,\n      this.x,\n      this.y,\n      this.birdHeight,\n      this.birdWidth\n);\nctx.draw(true);\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("æ”¹æˆæ—§çš„apiçš„å†™æ³•ï¼ŒçœŸæœºä¸Šè™½ç„¶å¯ä»¥æ¸²æŸ“å‡ºæ¥äº†ï¼Œä½†æ˜¯å¡é¡¿å¾—å¯æ€•...\nè€Œä¸”åƒç´ è¿˜å¾ˆæ¨¡ç³ŠğŸ™‰\næœ€åå‘ç°ï¼Œç”¨web-viewæ¯”åŸç”Ÿapiæµç•…å¤šäº†ğŸ™‰")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("ä¸ªäººè´¦å·å‘å¸ƒçš„ä¸æ”¯æŒweb-viewçš„ä½¿ç”¨...ğŸ™‰")])]),t._v(" "),a("p",[t._v("è¢«è¿«åˆå»è¯•å°æ¸¸æˆé‚£ä¸€å¥—... ğŸ™‰")]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("æœåŠ¡å™¨æ›´æ–°ï¼Œweb-view å†…å®¹æ²¡æœ‰æ›´æ–°"),a("br"),t._v("\næ¸…é™¤ç¼“å­˜ï¼šåœ¨srcä¸ŠåŠ æ—¶é—´æˆ³å‚æ•°")])]),t._v(" "),a("h2",{attrs:{id:"canvas-æ€§èƒ½å·®å¼‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#canvas-æ€§èƒ½å·®å¼‚","aria-hidden":"true"}},[t._v("#")]),t._v(" canvas æ€§èƒ½å·®å¼‚")]),t._v(" "),a("h3",{attrs:{id:"å°æ¸¸æˆcanvaså’Œå°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°æ¸¸æˆcanvaså’Œå°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ","aria-hidden":"true"}},[t._v("#")]),t._v(" å°æ¸¸æˆcanvaså’Œå°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ")]),t._v(" "),a("p",[t._v("å°æ¸¸æˆå¼•å…¥ä¸€ä¸ªadapter.js")]),t._v(" "),a("ol",[a("li",[t._v("æ ¸å¿ƒcanvaså¯¹è±¡ä»£ç ")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Canvas")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" canvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCanvas")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t    canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),t._v("\n\t    canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("_HTMLElement2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _getContext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getContext\n\t    canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getBoundingClientRect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t            top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t            left"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t            width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t            height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight\n\t        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n\t    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" canvas\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[t._v("createCanvas æ˜¯åˆ›å»ºä¸€ä¸ªç”»å¸ƒå¯¹è±¡ã€‚é¦–æ¬¡è°ƒç”¨åˆ›å»ºçš„æ˜¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ç”»å¸ƒï¼Œ\nä¹‹åè°ƒç”¨åˆ›å»ºçš„éƒ½æ˜¯ç¦»å±ç”»å¸ƒã€‚\nç¦»å±æ¸²æŸ“èƒ½ä¼˜åŒ–æ¸²æŸ“çš„æµç•…ï¼Œå°±æ˜¯è´¹æ€§èƒ½ï¼Œéœ€è¦å¤šå¼€ä¸€æ¡é€šé“ã€‚")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("äº‹ä»¶")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTouchStart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touchEventHandlerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchstart'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTouchMove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touchEventHandlerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchmove'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTouchEnd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touchEventHandlerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchend'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTouchCancel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touchEventHandlerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchcancel'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("å°ç¨‹åºäº‹ä»¶æ˜¯ç»‘å®šåœ¨ç»„ä»¶ä¸Šï¼Œå½“è¾¾åˆ°è§¦å‘äº‹ä»¶ï¼Œå†æ‰§è¡Œé€»è¾‘å±‚ä¸­å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚"),a("br"),t._v("\nå°æ¸¸æˆæ˜¯ç›´æ¥æ‰§è¡Œé€»è¾‘å±‚çš„äº‹ä»¶ã€‚ä»æ¶æ„å¯ä»¥çŸ¥é“ï¼Œè¿™æ ·å°‘äº†ä¸€å±‚è¿›ç¨‹é€šä¿¡äº¤æµã€‚"),a("br"),t._v(" "),a("img",{attrs:{src:"https://res.wx.qq.com/wxdoc/dist/assets/img/4-1.ad156d1c.png",alt:"æ¸²æŸ“å±‚å’Œé€»è¾‘å±‚"}})]),t._v(" "),a("h3",{attrs:{id:"web-view-canvas-å’Œ-å°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-view-canvas-å’Œ-å°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ","aria-hidden":"true"}},[t._v("#")]),t._v(" web-view canvas å’Œ å°ç¨‹åºcanvaså…ƒç´ æ¯”è¾ƒ")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ç¯å¢ƒ")]),t._v(" "),a("th",[t._v("é€»è¾‘å±‚")]),t._v(" "),a("th",[t._v("è§†å›¾å±‚")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("IOS")]),t._v(" "),a("td",[t._v("JSCore")]),t._v(" "),a("td",[t._v("WKWebView")])]),t._v(" "),a("tr",[a("td",[t._v("Android")]),t._v(" "),a("td",[t._v("V8")]),t._v(" "),a("td",[t._v("Chrome å†…æ ¸")])]),t._v(" "),a("tr",[a("td",[t._v("æ¨¡æ‹Ÿå™¨")]),t._v(" "),a("td",[t._v("NW.js")]),t._v(" "),a("td",[t._v("Chromium Webview")])])])]),t._v(" "),a("h3",{attrs:{id:"canvas-æ¸²æŸ“å¼•æ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#canvas-æ¸²æŸ“å¼•æ“","aria-hidden":"true"}},[t._v("#")]),t._v(" canvas æ¸²æŸ“å¼•æ“")])])}),[],!1,null,null,null);s.default=e.exports}}]);